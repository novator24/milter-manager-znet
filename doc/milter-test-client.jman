.\" DO NOT MODIFY THIS FILE! it was generated by rd2
.TH MILTER-TEST-CLIENT.RD.JA 1 "July 2013"
.SH milter\-test\-client / milter manager / milter managerのマニュアル
.SS 名前
.PP
milter\-test\-client \- milter側のmilterプロトコルを実装したプログラム
.SS 書式
.PP
\&\fBmilter\-test\-client\fP [\fIオプション ...\fP]
.SS 説明
.PP
milter\-test\-clientはMTA側から渡ってきた情報を表示するだけの
milterです。マクロも含めてMTA側から渡っている情報を表示する
ので、MTA側のmilterの設定を確認するために利用できます。
.PP
Postfixのアーカイブの中にも同様のツールがあります。
src/milter/内にあるtest\-milter.cがそれで、Postfixのmilterの実
装のテストにも使っているようです。ただし、test\-milterはマクロ
までは表示してくれません。もし、マクロを利用しているmilterが
期待通りに動かない場合の問題調査を行うのであれば、
milter\-test\-clientが役立つでしょう。
.SS オプション
.TP
.fi
.B
\-\-help
利用できるオプションを表示して終了します。
.TP
.fi
.B
\-\-connection\-spec=SPEC
接続を待ち受けるソケットを指定します。SPECの書式は次のう
ちのどれかです。

.IP
.B
\(bu
unix:パス
.IP
.B
\(bu
inet:ポート番号
.IP
.B
\(bu
inet:ポート番号@ホスト名
.IP
.B
\(bu
inet:ポート番号@[アドレス]
.IP
.B
\(bu
inet6:ポート番号
.IP
.B
\(bu
inet6:ポート番号@ホスト名
.IP
.B
\(bu
inet6:ポート番号@[アドレス]

例:

.IP
.B
\(bu
unix:/tmp/milter\-test\-client.sock
.IP
.B
\(bu
inet:10025
.IP
.B
\(bu
inet:10025@localhost
.IP
.B
\(bu
inet:10025@[127.0.0.1]
.IP
.B
\(bu
inet6:10025
.IP
.B
\(bu
inet6:10025@localhost
.IP
.B
\(bu
inet6:10025@[::1].TP
.fi
.B
\-\-verbose
実行時のログをより詳細に出力します。

「milter_log_level=all」というように環境変数を設定している
場合と同じ効果があります。.TP
.fi
.B
\-\-syslog
Syslogにもログを出力します。
.TP
.fi
.B
\-\-no\-report\-request
MTAから受け取った情報を表示しません。
.TP
.fi
.B
\-\-report\-memory\-profile
milterセッションが終了する毎にメモリ使用量を表示します。

MILTER_MEMORY_PROFILE環境変数をyesに設定するとより詳細な
情報を表示します。

例:

.nf
\&    % MILTER_MEMORY_PROFILE=yes milter\-test\-client \-s inet:10025
.fi.TP
.fi
.B
\-\-daemon
デーモンプロセスとして起動します。
.TP
.fi
.B
\-\-user=USER
実効ユーザをUSERとします。root権限が必要です。
.TP
.fi
.B
\-\-group=GROUP
実効グループをGROUPとします。root権限が必要です。
.TP
.fi
.B
\-\-unix\-socket\-group=GROUP
SPECで「unix:パス」を指定したときにUNIXドメインソケットの
グループを変更します。
.TP
.fi
.B
\-\-n\-workers=N_WORKERS
メールを処理するプロセスをN_WORKERS個起動します。
指定できる値は0以上、1000以下です。0のときにワーカープロセスを使用し
ません。

\fI注意: この項目は実験的な機能扱いです。\fP.TP
.fi
.B
\-\-event\-loop\-backend=BACKEND
イベントループのバックエンドを指定します。
BACKENDに指定できる値は、glibかlibevのいずれかです。

\fI注意: この項目は実験的な機能扱いです。\fP.TP
.fi
.B
\-\-packet\-buffer\-size=SIZE
end\-of\-message時に送信パケットをバッファリングするための
バッファサイズを指定します。パケットの量がSIZEバイ
ト以上になるとまとめてパケットを送信します。0を指定すると
バッファリングしません。

既定値は0KBで、バッファリングしません。.TP
.fi
.B
\-\-version
バージョンを表示して終了します。
.SS 終了ステータス
.PP
MTAからの接続を受け付ける状態になった場合は0になり、そうでな
い場合は0以外になります。milter\-test\-clientはソケットの書式が
間違っている場合か、ソケットまわりの問題が起こると接続を受け
付ける状態になれません。そけっとまわりの問題とは、例えば、ポー
トがすでに使用されているとか、UNIXドメインソケットを作成する
パーミッションがない、などです。
.SS 例
.PP
以下の例では、10025番ポートでMTAからの接続を待つmilterを起動
します。
.nf
\&    % milter\-test\-client \-s inet:10025
.fi
.SS 関連項目
.PP
milter\-test\-server.rd.ja(1),
milter\-performance\-check.rd.ja(1)

